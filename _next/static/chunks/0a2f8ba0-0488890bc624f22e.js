"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{9647:function(e,t,n){n.d(t,{t8:function(){return o.m},Ly:function(){return o.P},HH:function(){return J},ZP:function(){return zt}});var o=n(5881),r=n(3460),a=n(5113),l=n(7294),i=n(374),c=n(1102),d=n(3838),s=n(6939),u=n(1193);n(6733),n(2418),n(1267),n(4420),n(4440),n(2294),n(775);function f(e){var t=e.proOptions,n=e.position,o=void 0===n?"bottom-right":n;if(("paid-pro"===(null===t||void 0===t?void 0:t.account)||"paid-sponsor"===(null===t||void 0===t?void 0:t.account)||"paid-enterprise"===(null===t||void 0===t?void 0:t.account)||"paid-custom"===(null===t||void 0===t?void 0:t.account))&&null!==t&&void 0!==t&&t.hideAttribution)return null;var i="".concat(o).split("-");return l.createElement("div",{className:(0,a.Z)(["react-flow__attribution"].concat((0,r._)(i))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing"},l.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer"},"React Flow"))}var g=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var v=function(e){var t=e.x,n=e.y,i=e.label,c=e.labelStyle,d=void 0===c?{}:c,s=e.labelShowBg,u=void 0===s||s,f=e.labelBgStyle,v=void 0===f?{}:f,m=e.labelBgPadding,b=void 0===m?[2,4]:m,h=e.labelBgBorderRadius,y=void 0===h?2:h,S=e.children,w=e.className,E=(0,r.a)(e,g),C=(0,l.useRef)(null),P=(0,l.useState)({x:0,y:0,width:0,height:0}),O=(0,o._)(P,2),_=O[0],x=O[1],M=(0,a.Z)(["react-flow__edge-textwrapper",w]);return(0,l.useEffect)((function(){if(C.current){var e=C.current.getBBox();x({x:e.x,y:e.y,width:e.width,height:e.height})}}),[i]),"undefined"!==typeof i&&i?l.createElement("g",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transform:"translate(".concat(t-_.width/2," ").concat(n-_.height/2,")"),className:M},E),u&&l.createElement("rect",{width:_.width+2*b[0],x:-b[0],y:-b[1],height:_.height+2*b[1],className:"react-flow__edge-textbg",style:v,rx:y,ry:y}),l.createElement("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:C,style:d},i),S):null},m=(0,l.memo)(v),b=function(e){var t=e.path,n=e.centerX,o=e.centerY,r=e.label,a=e.labelStyle,i=e.labelShowBg,c=e.labelBgStyle,d=e.labelBgPadding,s=e.labelBgBorderRadius,u=e.style,f=e.markerEnd,g=e.markerStart,p=r?l.createElement(m,{x:n,y:o,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:s}):null;return l.createElement(l.Fragment,null,l.createElement("path",{style:u,d:t,className:"react-flow__edge-path",markerEnd:f,markerStart:g}),p)};function h(e){var t,n,r=e.pos,a=e.x1,l=e.y1,i=e.x2,c=e.y2;switch(r){case o.P.Left:case o.P.Right:t=.5*(a+i),n=l;break;case o.P.Top:case o.P.Bottom:t=a,n=.5*(l+c)}return[t,n]}function y(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=void 0===r?o.P.Bottom:r,l=e.targetX,i=e.targetY,c=e.targetPosition,d=void 0===c?o.P.Top:c,s=h({pos:a,x1:t,y1:n,x2:l,y2:i}),u=(0,o._)(s,2),f=u[0],g=u[1],p=h({pos:d,x1:l,y1:i,x2:t,y2:n}),v=(0,o._)(p,2),m=v[0],b=v[1];return"M".concat(t,",").concat(n," C").concat(f,",").concat(g," ").concat(m,",").concat(b," ").concat(l,",").concat(i)}var S=(0,l.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.sourcePosition,c=void 0===i?o.P.Bottom:i,d=e.targetPosition,s=void 0===d?o.P.Top:d,u=e.label,f=e.labelStyle,g=e.labelShowBg,p=e.labelBgStyle,v=e.labelBgPadding,m=e.labelBgBorderRadius,S=e.style,w=e.markerEnd,E=e.markerStart,C={sourceX:t,sourceY:n,sourcePosition:c,targetX:r,targetY:a,targetPosition:s},P=y(C),O=function(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=void 0===r?o.P.Bottom:r,l=e.targetX,i=e.targetY,c=e.targetPosition,d=void 0===c?o.P.Top:c,s=h({pos:a,x1:t,y1:n,x2:l,y2:i}),u=(0,o._)(s,2),f=u[0],g=u[1],p=h({pos:d,x1:l,y1:i,x2:t,y2:n}),v=(0,o._)(p,2),m=.125*t+.375*f+.375*v[0]+.125*l,b=.125*n+.375*g+.375*v[1]+.125*i;return[m,b,Math.abs(m-t),Math.abs(b-n)]}(C),_=(0,o._)(O,2),x=_[0],M=_[1];return l.createElement(b,{path:P,centerX:x,centerY:M,label:u,labelStyle:f,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:m,style:S,markerEnd:w,markerStart:E})})),w=[o.P.Left,o.P.Right],E=function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,l=e.sourcePosition,i=void 0===l?o.P.Bottom:l,c=e.targetPosition,d=void 0===c?o.P.Top:c,s=w.includes(i),u=w.includes(d);if(s&&!u||u&&!s){var f=s?Math.abs(r-t):0,g=t>r?t-f:t+f,p=s?0:Math.abs(a-n);return[g,n<a?n+p:n-p,f,p]}var v=Math.abs(r-t)/2,m=r<t?r+v:r-v,b=Math.abs(a-n)/2;return[m,a<n?a+b:a-b,v,b]},C=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},P=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},O=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},_=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},x=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)},M=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},N=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},k=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)};function D(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=void 0===r?o.P.Bottom:r,l=e.targetX,i=e.targetY,c=e.targetPosition,d=void 0===c?o.P.Top:c,s=e.borderRadius,u=void 0===s?5:s,f=e.centerX,g=e.centerY,p=E({sourceX:t,sourceY:n,targetX:l,targetY:i}),v=(0,o._)(p,4),m=v[0],b=v[1],h=v[2],y=v[3],S=Math.min(u,Math.abs(l-t)),w=Math.min(u,Math.abs(i-n)),D=Math.min(S,w,h,y),j=[o.P.Left,o.P.Right],B="undefined"!==typeof f?f:m,L="undefined"!==typeof g?g:b,z=null,R=null;return t<=l?(z=n<=i?C(t,L,D):M(t,L,D),R=n<=i?k(l,L,D):_(l,L,D)):(z=n<i?O(t,L,D):N(t,L,D),R=n<i?x(l,L,D):P(l,L,D)),j.includes(a)&&j.includes(d)?t<=l?(z=n<=i?k(B,n,D):_(B,n,D),R=n<=i?C(B,i,D):M(B,i,D)):(a===o.P.Right&&d===o.P.Left||a===o.P.Left&&d===o.P.Right||a===o.P.Left&&d===o.P.Left)&&(z=n<=i?x(B,n,D):P(B,n,D),R=n<=i?O(B,i,D):N(B,i,D)):j.includes(a)&&!j.includes(d)?(z=t<=l?n<=i?k(l,n,D):_(l,n,D):n<=i?x(l,n,D):P(l,n,D),R=""):!j.includes(a)&&j.includes(d)&&(z=t<=l?n<=i?C(t,i,D):M(t,i,D):n<=i?O(t,i,D):N(t,i,D),R=""),"M ".concat(t,",").concat(n).concat(z).concat(R,"L ").concat(l,",").concat(i)}var j=(0,l.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.label,c=e.labelStyle,d=e.labelShowBg,s=e.labelBgStyle,u=e.labelBgPadding,f=e.labelBgBorderRadius,g=e.style,p=e.sourcePosition,v=void 0===p?o.P.Bottom:p,m=e.targetPosition,h=void 0===m?o.P.Top:m,y=e.markerEnd,S=e.markerStart,w=e.borderRadius,C=void 0===w?5:w,P=E({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:v,targetPosition:h}),O=(0,o._)(P,2),_=O[0],x=O[1],M=D({sourceX:t,sourceY:n,sourcePosition:v,targetX:r,targetY:a,targetPosition:h,borderRadius:C});return l.createElement(b,{path:M,centerX:_,centerY:x,label:i,labelStyle:c,labelShowBg:d,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:g,markerEnd:y,markerStart:S})}));function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=(0,l.memo)((function(e){return l.createElement(j,L(L({},e),{},{borderRadius:0}))})),R=(0,l.memo)((function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,i=e.labelStyle,c=e.labelShowBg,d=e.labelBgStyle,s=e.labelBgPadding,u=e.labelBgBorderRadius,f=e.style,g=e.markerEnd,p=e.markerStart,v=Math.abs(r-n)/2,m=r<n?r+v:r-v,h=Math.abs(o-t)/2,y=o<t?o+h:o-h,S="M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r);return l.createElement(b,{path:S,centerX:y,centerY:m,label:a,labelStyle:i,labelShowBg:c,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:u,style:f,markerEnd:g,markerStart:p})}));function T(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Y(e){var t,n,r=e.pos,a=e.x1,l=e.y1,i=e.x2,c=e.y2,d=e.c;switch(r){case o.P.Left:t=a-T(a-i,d),n=l;break;case o.P.Right:t=a+T(i-a,d),n=l;break;case o.P.Top:t=a,n=l-T(l-c,d);break;case o.P.Bottom:t=a,n=l+T(c-l,d)}return[t,n]}function X(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=void 0===r?o.P.Bottom:r,l=e.targetX,i=e.targetY,c=e.targetPosition,d=void 0===c?o.P.Top:c,s=e.curvature,u=void 0===s?.25:s,f=Y({pos:a,x1:t,y1:n,x2:l,y2:i,c:u}),g=(0,o._)(f,2),p=g[0],v=g[1],m=Y({pos:d,x1:l,y1:i,x2:t,y2:n,c:u}),b=(0,o._)(m,2),h=b[0],y=b[1];return"M".concat(t,",").concat(n," C").concat(p,",").concat(v," ").concat(h,",").concat(y," ").concat(l,",").concat(i)}var I=(0,l.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.sourcePosition,c=void 0===i?o.P.Bottom:i,d=e.targetPosition,s=void 0===d?o.P.Top:d,u=e.label,f=e.labelStyle,g=e.labelShowBg,p=e.labelBgStyle,v=e.labelBgPadding,m=e.labelBgBorderRadius,h=e.style,y=e.markerEnd,S=e.markerStart,w={sourceX:t,sourceY:n,sourcePosition:c,targetX:r,targetY:a,targetPosition:s,curvature:e.curvature},E=X(w),C=function(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=void 0===r?o.P.Bottom:r,l=e.targetX,i=e.targetY,c=e.targetPosition,d=void 0===c?o.P.Top:c,s=e.curvature,u=void 0===s?.25:s,f=Y({pos:a,x1:t,y1:n,x2:l,y2:i,c:u}),g=(0,o._)(f,2),p=g[0],v=g[1],m=Y({pos:d,x1:l,y1:i,x2:t,y2:n,c:u}),b=(0,o._)(m,2),h=.125*t+.375*p+.375*b[0]+.125*l,y=.125*n+.375*v+.375*b[1]+.125*i;return[h,y,Math.abs(h-t),Math.abs(y-n)]}(w),P=(0,o._)(C,2),O=P[0],_=P[1];return l.createElement(b,{path:E,centerX:O,centerY:_,label:u,labelStyle:f,labelShowBg:g,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:S})})),A=(0,l.createContext)(null),H=A.Provider;function Z(e,t,n,r,a,l,i){var c=i.elementFromPoint(e.clientX,e.clientY),d=(null===c||void 0===c?void 0:c.classList.contains("target"))||!1,s=(null===c||void 0===c?void 0:c.classList.contains("source"))||!1,u={elementBelow:c,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(d||s)&&(u.isHoveringHandle=!0,t!==o.C.Strict||(n&&s||!n&&d))){var f=c.getAttribute("data-nodeid"),g=c.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:g,target:r,targetHandle:a}:{source:r,sourceHandle:a,target:f,targetHandle:g};u.connection=p,u.isValid=l(p)}return u}function U(e){null===e||void 0===e||e.classList.remove("react-flow__handle-valid"),null===e||void 0===e||e.classList.remove("react-flow__handle-connecting")}function K(e,t,n,r,a,l,i,c,d,s,u,f,g){var p=e.target.closest(".react-flow"),v=(0,o.g)(e.target);if(v){var m=v.elementFromPoint(e.clientX,e.clientY),b=null===m||void 0===m?void 0:m.classList.contains("target"),h=null===m||void 0===m?void 0:m.classList.contains("source");if(p&&(b||h||d)){var y,S=d||(b?"target":"source"),w=p.getBoundingClientRect();r({connectionPosition:{x:e.clientX-w.left,y:e.clientY-w.top},connectionNodeId:n,connectionHandleId:t,connectionHandleType:S}),null===u||void 0===u||u(e,{nodeId:n,handleId:t,handleType:S}),v.addEventListener("mousemove",E),v.addEventListener("mouseup",(function e(o){var u=Z(o,c,l,n,t,i,v),p=u.connection,m=u.isValid;null===f||void 0===f||f(o),m&&(null===a||void 0===a||a(p)),null===g||void 0===g||g(o),d&&s&&s(o),U(y),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),v.removeEventListener("mousemove",E),v.removeEventListener("mouseup",e)}))}}function E(e){r({connectionPosition:{x:e.clientX-w.left,y:e.clientY-w.top}});var o=Z(e,c,l,n,t,i,v),a=o.connection,d=o.elementBelow,s=o.isValid;if(!o.isHoveringHandle)return U(y);!(a.source===a.target)&&d&&(y=d,d.classList.add("react-flow__handle-connecting"),d.classList.toggle("react-flow__handle-valid",s))}}A.Consumer;var G=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(){return!0},Q=function(e){return{onConnectAction:e.onConnect,onConnectStart:e.onConnectStart,onConnectStop:e.onConnectStop,onConnectEnd:e.onConnectEnd,connectionMode:e.connectionMode,connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,hasDefaultEdges:e.hasDefaultEdges}},q=(0,l.forwardRef)((function(e,t){var n=e.type,c=void 0===n?"source":n,d=e.position,s=void 0===d?o.P.Top:d,u=e.isValidConnection,f=void 0===u?F:u,g=e.isConnectable,p=void 0===g||g,v=e.id,m=e.onConnect,b=e.children,h=e.className,y=(0,r.a)(e,G),S=(0,o.u)(),w=(0,l.useContext)(A),E=(0,o.b)(Q,i.Z),C=E.onConnectAction,P=E.onConnectStart,O=E.onConnectStop,_=E.onConnectEnd,x=E.connectionMode,M=E.connectionStartHandle,N=E.connectOnClick,k=E.hasDefaultEdges,D=v||null,j="target"===c,B=(0,l.useCallback)((function(e){var t=W(W({},S.getState().defaultEdgeOptions),e);if(k){var n=S.getState().edges;S.setState({edges:(0,o.c)(t,n)})}null===C||void 0===C||C(t),null===m||void 0===m||m(t)}),[k,C,m]),L=(0,l.useCallback)((function(e){0===e.button&&K(e,D,w,S.setState,B,j,f,x,void 0,void 0,P,O,_)}),[D,w,B,j,f,x,P,O,_]),z=(0,l.useCallback)((function(e){if(M){var t=(0,o.g)(e.target),n=Z(e,x,"target"===M.type,M.nodeId,M.handleId||null,f,t),r=n.connection,a=n.isValid;null===O||void 0===O||O(e),a&&B(r),null===_||void 0===_||_(e),S.setState({connectionStartHandle:null})}else null===P||void 0===P||P(e,{nodeId:w,handleId:D,handleType:c}),S.setState({connectionStartHandle:{nodeId:w,type:c,handleId:D}})}),[M,P,B,O,_,j,w,D,c]),R=(0,a.Z)(["react-flow__handle","react-flow__handle-".concat(s),"nodrag",h,{source:!j,target:j,connectable:p,connecting:(null===M||void 0===M?void 0:M.nodeId)===w&&(null===M||void 0===M?void 0:M.handleId)===D&&(null===M||void 0===M?void 0:M.type)===c}]);return l.createElement("div",W({"data-handleid":D,"data-nodeid":w,"data-handlepos":s,className:R,onMouseDown:L,onClick:N?z:void 0,ref:t},y),b)}));q.displayName="Handle";var J=(0,l.memo)(q),$=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,a=void 0===r?o.P.Top:r,i=e.sourcePosition,c=void 0===i?o.P.Bottom:i;return l.createElement(l.Fragment,null,l.createElement(J,{type:"target",position:a,isConnectable:n}),null===t||void 0===t?void 0:t.label,l.createElement(J,{type:"source",position:c,isConnectable:n}))};$.displayName="DefaultNode";var ee=(0,l.memo)($),te=function(e){var t=e.data,n=e.isConnectable,r=e.sourcePosition,a=void 0===r?o.P.Bottom:r;return l.createElement(l.Fragment,null,null===t||void 0===t?void 0:t.label,l.createElement(J,{type:"source",position:a,isConnectable:n}))};te.displayName="InputNode";var ne=(0,l.memo)(te),oe=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,a=void 0===r?o.P.Top:r;return l.createElement(l.Fragment,null,l.createElement(J,{type:"target",position:a,isConnectable:n}),null===t||void 0===t?void 0:t.label)};oe.displayName="OutputNode";var re=(0,l.memo)(oe),ae=function(e){return{selectedNodes:Array.from(e.nodeInternals.values()).filter((function(e){return e.selected})),selectedEdges:e.edges.filter((function(e){return e.selected}))}},le=function(e,t){var n=e.selectedNodes.map((function(e){return e.id})),o=t.selectedNodes.map((function(e){return e.id})),r=e.selectedEdges.map((function(e){return e.id})),a=t.selectedEdges.map((function(e){return e.id}));return(0,i.Z)(n,o)&&(0,i.Z)(r,a)};function ie(e){var t=e.onSelectionChange,n=(0,o.b)(ae,le),r=n.selectedNodes,a=n.selectedEdges;return(0,l.useEffect)((function(){t({nodes:r,edges:a})}),[r,a]),null}var ce=(0,l.memo)(ie),de=function(e){return{setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset}};function se(e,t){(0,l.useEffect)((function(){"undefined"!==typeof e&&t(e)}),[e])}function ue(e,t,n){(0,l.useEffect)((function(){"undefined"!==typeof t&&n((0,o.a)({},e,t))}),[t])}var fe=function(e){var t=e.nodes,n=e.edges,r=e.defaultNodes,a=e.defaultEdges,c=e.onConnect,d=e.onConnectStart,s=e.onConnectStop,u=e.onConnectEnd,f=e.nodesDraggable,g=e.nodesConnectable,p=e.minZoom,v=e.maxZoom,m=e.nodeExtent,b=e.onNodesChange,h=e.onEdgesChange,y=e.elementsSelectable,S=e.connectionMode,w=e.snapGrid,E=e.snapToGrid,C=e.translateExtent,P=e.connectOnClick,O=e.defaultEdgeOptions,_=e.fitView,x=e.fitViewOptions,M=e.onNodesDelete,N=e.onEdgesDelete,k=(0,o.b)(de,i.Z),D=k.setNodes,j=k.setEdges,B=k.setDefaultNodesAndEdges,L=k.setMinZoom,z=k.setMaxZoom,R=k.setTranslateExtent,T=k.setNodeExtent,Y=k.reset,X=(0,o.u)();return(0,l.useEffect)((function(){return B(r,a),function(){Y()}}),[]),ue("defaultEdgeOptions",O,X.setState),ue("connectionMode",S,X.setState),ue("onConnect",c,X.setState),ue("onConnectStart",d,X.setState),ue("onConnectStop",s,X.setState),ue("onConnectEnd",u,X.setState),ue("nodesDraggable",f,X.setState),ue("nodesConnectable",g,X.setState),ue("elementsSelectable",y,X.setState),ue("snapToGrid",E,X.setState),ue("snapGrid",w,X.setState),ue("onNodesChange",b,X.setState),ue("onEdgesChange",h,X.setState),ue("connectOnClick",P,X.setState),ue("fitViewOnInit",_,X.setState),ue("fitViewOnInitOptions",x,X.setState),ue("onNodesDelete",M,X.setState),ue("onEdgesDelete",N,X.setState),se(t,D),se(n,j),se(r,D),se(a,j),se(p,L),se(v,z),se(C,R),se(m,T),null},ge=function(e,t,n){return n===o.P.Left?e-t:n===o.P.Right?e+t:e},pe=function(e,t,n){return n===o.P.Top?e-t:n===o.P.Bottom?e+t:e},ve=function(e){var t=e.className,n=e.position,o=e.centerX,r=e.centerY,i=e.radius,c=void 0===i?10:i;return l.createElement("circle",{className:(0,a.Z)(["react-flow__edgeupdater",t]),cx:ge(o,c,n),cy:pe(r,c,n),r:c,stroke:"transparent",fill:"transparent"})},me=function(e){return{addSelectedEdges:e.addSelectedEdges,connectionMode:e.connectionMode}},be=function(e){var t=function(t){var n=t.id,r=t.className,c=t.type,d=t.data,s=t.onClick,u=t.onEdgeDoubleClick,f=t.selected,g=t.animated,p=t.label,v=t.labelStyle,m=t.labelShowBg,b=t.labelBgStyle,h=t.labelBgPadding,y=t.labelBgBorderRadius,S=t.style,w=t.source,E=t.target,C=t.sourceX,P=t.sourceY,O=t.targetX,_=t.targetY,x=t.sourcePosition,M=t.targetPosition,N=t.elementsSelectable,k=t.hidden,D=t.sourceHandleId,j=t.targetHandleId,B=t.onContextMenu,L=t.onMouseEnter,z=t.onMouseMove,R=t.onMouseLeave,T=t.edgeUpdaterRadius,Y=t.onEdgeUpdate,X=t.onEdgeUpdateStart,I=t.onEdgeUpdateEnd,A=t.markerEnd,H=t.markerStart,Z=(0,o.u)(),U=(0,o.b)(me,i.Z),G=U.addSelectedEdges,V=U.connectionMode,W=(0,l.useState)(!1),F=(0,o._)(W,2),Q=F[0],q=F[1],J=!N&&!s,$="undefined"!==typeof Y,ee=(0,a.Z)(["react-flow__edge","react-flow__edge-".concat(c),r,{selected:f,animated:g,inactive:J,updating:Q}]),te=(0,l.useMemo)((function(){var e={id:n,source:w,target:E,type:c};return D&&(e.sourceHandle=D),j&&(e.targetHandle=j),"undefined"!==typeof d&&(e.data=d),e}),[n,w,E,c,D,j,d]),ne=(0,l.useCallback)((function(e){N&&(Z.setState({nodesSelectionActive:!1}),G([te.id])),null===s||void 0===s||s(e,te)}),[N,te,s]),oe=(0,l.useCallback)((function(e){null===u||void 0===u||u(e,te)}),[te,u]),re=(0,l.useCallback)((function(e){null===B||void 0===B||B(e,te)}),[te,B]),ae=(0,l.useCallback)((function(e){null===L||void 0===L||L(e,te)}),[te,B]),le=(0,l.useCallback)((function(e){null===z||void 0===z||z(e,te)}),[te,B]),ie=(0,l.useCallback)((function(e){null===R||void 0===R||R(e,te)}),[te,B]),ce=(0,l.useCallback)((function(e,t){var o=t?E:w,r=(t?j:D)||null,a=t?"target":"source",l=t;null===X||void 0===X||X(e,te,a);var i=I?function(e){return I(e,te,a)}:void 0;K(e,r,o,Z.setState,(function(e){var t=Z.getState().edges.find((function(e){return e.id===n}));t&&Y&&Y(t,e)}),l,(function(){return!0}),V,a,i,Z.getState)}),[n,w,E,c,D,j,te,Y]),de=(0,l.useCallback)((function(e){ce(e,!0)}),[n,w,D,ce]),se=(0,l.useCallback)((function(e){ce(e,!1)}),[n,E,j,ce]),ue=(0,l.useCallback)((function(){return q(!0)}),[q]),fe=(0,l.useCallback)((function(){return q(!1)}),[q]),ge=(0,l.useMemo)((function(){return"url(#".concat((0,o.d)(H),")")}),[H]),pe=(0,l.useMemo)((function(){return"url(#".concat((0,o.d)(A),")")}),[A]);return k?null:l.createElement("g",{className:ee,onClick:ne,onDoubleClick:oe,onContextMenu:re,onMouseEnter:ae,onMouseMove:le,onMouseLeave:ie},l.createElement(e,{id:n,source:w,target:E,selected:f,animated:g,label:p,labelStyle:v,labelShowBg:m,labelBgStyle:b,labelBgPadding:h,labelBgBorderRadius:y,data:d,style:S,sourceX:C,sourceY:P,targetX:O,targetY:_,sourcePosition:x,targetPosition:M,sourceHandleId:D,targetHandleId:j,markerStart:ge,markerEnd:pe}),$&&l.createElement("g",{onMouseDown:de,onMouseEnter:ue,onMouseOut:fe},l.createElement(ve,{position:x,centerX:C,centerY:P,radius:T})),$&&l.createElement("g",{onMouseDown:se,onMouseEnter:ue,onMouseOut:fe},l.createElement(ve,{position:M,centerX:O,centerY:_,radius:T})))};return t.displayName="EdgeWrapper",(0,l.memo)(t)};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e){var t={default:be(e.default||I),straight:be(e.bezier||R),step:be(e.step||z),smoothstep:be(e.step||j),simplebezier:be(e.simplebezier||S)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=be(e[n]||I),t}),{});return ye(ye({},t),n)}function we(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((null===n||void 0===n?void 0:n.x)||0)+t.x,a=((null===n||void 0===n?void 0:n.y)||0)+t.y,l=(null===n||void 0===n?void 0:n.width)||t.width,i=(null===n||void 0===n?void 0:n.height)||t.height;switch(e){case o.P.Top:return{x:r+l/2,y:a};case o.P.Right:return{x:r+l,y:a+i/2};case o.P.Bottom:return{x:r+l/2,y:a+i};case o.P.Left:return{x:r,y:a+i/2}}}function Ee(e,t){if(!e)return null;var n=null;return 1!==e.length&&t?t&&(n=e.find((function(e){return e.id===t}))):n=e[0],"undefined"===typeof n?null:n}function Ce(e,t){var n,o,r,a,l=e.get(t),i=null===l||void 0===l?void 0:l.handleBounds,c=!l||!l.handleBounds||!l.width||!l.height||"undefined"===typeof(null===(n=l.positionAbsolute)||void 0===n?void 0:n.x)||"undefined"===typeof(null===(o=l.positionAbsolute)||void 0===o?void 0:o.y);return[{x:(null===l||void 0===l||null===(r=l.positionAbsolute)||void 0===r?void 0:r.x)||0,y:(null===l||void 0===l||null===(a=l.positionAbsolute)||void 0===a?void 0:a.y)||0,width:(null===l||void 0===l?void 0:l.width)||0,height:(null===l||void 0===l?void 0:l.height)||0},i||null,!c]}var Pe="undefined"!==typeof document?document:null,Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:Pe},n=(0,l.useState)(!1),a=(0,o._)(n,2),i=a[0],c=a[1],d=(0,l.useRef)(new Set([])),s=(0,l.useMemo)((function(){if(null!==e){var t=(Array.isArray(e)?e:[e]).filter((function(e){return"string"===typeof e})).map((function(e){return e.split("+")})),n=t.reduce((function(e,t){return e.concat.apply(e,(0,r._)(t))}),[]);return[t,n]}return[[],[]]}),[e]),u=(0,o._)(s,2),f=u[0],g=u[1];return(0,l.useEffect)((function(){if(null!==e){var n,o,r=function(e){if(Me(e))return!1;var t=xe(e.code,g);d.current.add(e[t]),_e(f,d.current,!1)&&(e.preventDefault(),c(!0))},a=function(e){if(Me(e))return!1;var t=xe(e.code,g);_e(f,d.current,!0)?(c(!1),d.current.clear()):d.current.delete(e[t])},l=function(){d.current.clear(),c(!1)};return null===t||void 0===t||null===(n=t.target)||void 0===n||n.addEventListener("keydown",r),null===t||void 0===t||null===(o=t.target)||void 0===o||o.addEventListener("keyup",a),window.addEventListener("blur",l),function(){var e,n;null===t||void 0===t||null===(e=t.target)||void 0===e||e.removeEventListener("keydown",r),null===t||void 0===t||null===(n=t.target)||void 0===n||n.removeEventListener("keyup",a),window.removeEventListener("blur",l)}}}),[e,c]),i};function _e(e,t,n){return e.filter((function(e){return n||e.length===t.size})).some((function(e){return e.every((function(e){return t.has(e)}))}))}function xe(e,t){return t.includes(e)?"code":"key"}function Me(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(null===t||void 0===t?void 0:t.nodeName)||(null===t||void 0===t?void 0:t.hasAttribute("contenteditable"))}var Ne=function(e){return{onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange}};var ke=function(e){return{x:e.x,y:e.y,zoom:e.k}},De=function(e,t){return e.target.closest(".".concat(t))},je=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler}},Be=function(e){var t=e.onMove,n=e.onMoveStart,r=e.onMoveEnd,a=e.zoomOnScroll,u=void 0===a||a,f=e.zoomOnPinch,g=void 0===f||f,p=e.panOnScroll,v=void 0!==p&&p,m=e.panOnScrollSpeed,b=void 0===m?.5:m,h=e.panOnScrollMode,y=void 0===h?o.h.Free:h,S=e.zoomOnDoubleClick,w=void 0===S||S,E=e.selectionKeyPressed,C=e.elementsSelectable,P=e.panOnDrag,O=void 0===P||P,_=e.defaultPosition,x=void 0===_?[0,0]:_,M=e.defaultZoom,N=void 0===M?1:M,k=e.zoomActivationKeyCode,D=e.preventScrolling,j=void 0===D||D,B=e.children,L=e.noWheelClassName,z=e.noPanClassName,R=(0,o.u)(),T=(0,l.useRef)(null),Y=(0,l.useRef)({x:0,y:0,zoom:0}),X=(0,o.b)(je,i.Z),I=X.d3Zoom,A=X.d3Selection,H=X.d3ZoomHandler,Z=Oe(k);return function(e){var t=(0,o.u)();(0,l.useEffect)((function(){var n,r=function(){if(e.current){var n=(0,o.f)(e.current);t.setState({width:n.width||500,height:n.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver((function(){return r()}))).observe(e.current),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}}),[])}(T),(0,l.useEffect)((function(){if(T.current){var e=R.getState(),t=e.minZoom,n=e.maxZoom,r=e.translateExtent,a=(0,c.sP)().scaleExtent([t,n]).translateExtent(r),l=(0,d.Z)(T.current).call(a),i=(0,o.i)(x[0],r[0][0],r[1][0]),s=(0,o.i)(x[1],r[0][1],r[1][1]),u=(0,o.i)(N,t,n),f=c.CR.translate(i,s).scale(u);a.transform(l,f),R.setState({d3Zoom:a,d3Selection:l,d3ZoomHandler:l.on("wheel.zoom"),transform:[i,s,u]})}}),[]),(0,l.useEffect)((function(){A&&I&&(v&&!Z?A.on("wheel",(function(e){if(De(e,L))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=A.property("__zoom").k||1;if(e.ctrlKey&&g){var n=(0,s.Z)(e),r=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,a=t*Math.pow(2,r);I.scaleTo(A,a,n)}else{var l=1===e.deltaMode?20:1,i=y===o.h.Vertical?0:e.deltaX*l,c=y===o.h.Horizontal?0:e.deltaY*l;I.translateBy(A,-i/t*b,-c/t*b)}})).on("wheel.zoom",null):"undefined"!==typeof H&&A.on("wheel",(function(e){if(!j||De(e,L))return null;e.preventDefault()})).on("wheel.zoom",H))}),[v,y,A,I,H,Z,g,j,L]),(0,l.useEffect)((function(){I&&(E?I.on("zoom",null):I.on("zoom",(function(e){if(R.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),t){var n=ke(e.transform);t(e.sourceEvent,n)}})))}),[E,I,t]),(0,l.useEffect)((function(){I&&(n?I.on("start",(function(e){var t=ke(e.transform);Y.current=t,n(e.sourceEvent,t)})):I.on("start",null))}),[I,n]),(0,l.useEffect)((function(){I&&(r?I.on("end",(function(e){if(n=Y.current,o=e.transform,n.x!==o.x||n.y!==o.y||n.zoom!==o.k){var t=ke(e.transform);Y.current=t,r(e.sourceEvent,t)}var n,o})):I.on("end",null))}),[I,r]),(0,l.useEffect)((function(){I&&I.filter((function(e){var t=Z||u,n=g&&e.ctrlKey;return!!(O||t||v||w||g)&&(!E&&(!(!w&&"dblclick"===e.type)&&((!De(e,L)||"wheel"!==e.type)&&((!De(e,z)||"wheel"===e.type)&&(!(!g&&e.ctrlKey&&"wheel"===e.type)&&(!!(t||v||n||"wheel"!==e.type)&&(!!(O||"mousedown"!==e.type&&"touchstart"!==e.type)&&((!e.ctrlKey||"wheel"===e.type)&&!e.button))))))))}))}),[I,u,g,v,w,O,E,C,Z]),l.createElement("div",{className:"react-flow__renderer react-flow__container",ref:T},B)};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var Te=function(e){return{userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable}},Ye={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},Xe=(0,l.memo)((function(e){var t=e.selectionKeyPressed,n=(0,o.u)(),r=(0,l.useRef)(0),a=(0,l.useRef)(0),c=(0,l.useRef)(),d=(0,l.useState)(Ye),s=(0,o._)(d,2),u=s[0],f=s[1],g=(0,o.b)(Te,i.Z),p=g.userSelectionActive,v=g.elementsSelectable,m=p||t,b=(0,l.useCallback)((function(){f(Ye),n.setState({userSelectionActive:!1}),r.current=0,a.current=0}),[]),h=(0,l.useCallback)((function(e){var t=e.target.closest(".react-flow");c.current=t.getBoundingClientRect();var o=Re(e,c.current);f({width:0,height:0,startX:o.x,startY:o.y,x:o.x,y:o.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})}),[]),y=(0,l.useCallback)((function(){n.setState({nodesSelectionActive:r.current>0}),b()}),[]),S=(0,l.useCallback)((function(){n.setState({nodesSelectionActive:!1}),b()}),[]);return v&&m?l.createElement("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:h,onMouseMove:function(e){var l,i;if(t&&u.draw&&c.current){var d=Re(e,c.current),s=null!==(l=u.startX)&&void 0!==l?l:0,g=null!==(i=u.startY)&&void 0!==i?i:0,p=ze(ze({},u),{},{x:d.x<s?d.x:s,y:d.y<g?d.y:g,width:Math.abs(d.x-s),height:Math.abs(d.y-g)}),v=n.getState(),m=v.nodeInternals,b=v.edges,h=v.transform,y=v.onNodesChange,S=v.onEdgesChange,w=Array.from(m).map((function(e){var t=(0,o._)(e,2);return t[0],t[1]})),E=(0,o.j)(m,p,h,!1,!0),C=(0,o.e)(E,b).map((function(e){return e.id})),P=E.map((function(e){return e.id}));if(r.current!==P.length){r.current=P.length;var O=(0,o.k)(w,P);O.length&&(null===y||void 0===y||y(O))}if(a.current!==C.length){a.current=C.length;var _=(0,o.k)(b,C);_.length&&(null===S||void 0===S||S(_))}f(p)}},onMouseUp:y,onMouseLeave:S},u.draw&&l.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:u.width,height:u.height,transform:"translate(".concat(u.x,"px, ").concat(u.y,"px)")}})):null})),Ie=function(e){return{transform:e.transform,selectedNodesBbox:e.selectedNodesBbox,userSelectionActive:e.userSelectionActive,selectedNodes:Array.from(e.nodeInternals.values()).filter((function(e){return e.selected})),snapToGrid:e.snapToGrid,snapGrid:e.snapGrid,updateNodePosition:e.updateNodePosition}};function Ae(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,r=e.onSelectionDragStop,c=e.onSelectionContextMenu,d=e.noPanClassName,s=(0,o.b)(Ie,i.Z),f=s.transform,g=s.userSelectionActive,p=s.selectedNodes,v=s.snapToGrid,m=s.snapGrid,b=s.updateNodePosition,h=(0,o._)(f,3),y=h[0],S=h[1],w=h[2],E=(0,l.useRef)(null),C=(0,l.useMemo)((function(){return v?m:[1,1]}),[v,m]),P=(0,l.useMemo)((function(){return{transform:"translate(".concat(y,"px,").concat(S,"px) scale(").concat(w,")")}}),[y,S,w]),O=(0,l.useMemo)((function(){return(0,o.l)(p)}),[p]),_=(0,l.useMemo)((function(){return{width:O.width,height:O.height,top:O.y,left:O.x}}),[O]),x=(0,l.useCallback)((function(e){null===t||void 0===t||t(e,p)}),[t,p]),M=(0,l.useCallback)((function(e,t){b({diff:{x:t.deltaX,y:t.deltaY},dragging:!0}),null===n||void 0===n||n(e,p)}),[n,p,b]),N=(0,l.useCallback)((function(e){b({dragging:!1}),null===r||void 0===r||r(e,p)}),[p,r]),k=(0,l.useCallback)((function(e){null===c||void 0===c||c(e,p)}),[c,p]);return null===p||void 0===p||!p.length||g?null:l.createElement("div",{className:(0,a.Z)(["react-flow__nodesselection","react-flow__container",d]),style:P},l.createElement(u.DraggableCore,{scale:w,grid:C,onStart:function(e){return x(e)},onDrag:function(e,t){return M(e,t)},onStop:function(e){return N(e)},nodeRef:E,enableUserSelectHack:!1},l.createElement("div",{ref:E,className:"react-flow__nodesselection-rect",onContextMenu:k,style:_})))}var He=(0,l.memo)(Ae),Ze=function(e){return{resetSelectedElements:e.resetSelectedElements,nodesSelectionActive:e.nodesSelectionActive}},Ue=function(e){var t=e.children,n=e.onPaneClick,a=e.onPaneContextMenu,c=e.onPaneScroll,d=e.deleteKeyCode,s=e.onMove,u=e.onMoveStart,f=e.onMoveEnd,g=e.selectionKeyCode,p=e.multiSelectionKeyCode,v=e.zoomActivationKeyCode,m=e.elementsSelectable,b=e.zoomOnScroll,h=e.zoomOnPinch,y=e.panOnScroll,S=e.panOnScrollSpeed,w=e.panOnScrollMode,E=e.zoomOnDoubleClick,C=e.panOnDrag,P=e.defaultPosition,O=e.defaultZoom,_=e.preventScrolling,x=e.onSelectionDragStart,M=e.onSelectionDrag,N=e.onSelectionDragStop,k=e.onSelectionContextMenu,D=e.noWheelClassName,j=e.noPanClassName,B=(0,o.u)(),L=(0,o.b)(Ze,i.Z),z=L.resetSelectedElements,R=L.nodesSelectionActive,T=Oe(g);!function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,a=(0,o.u)(),c=(0,o.b)(Ne,i.Z),d=c.onNodesChange,s=c.onEdgesChange,u=Oe(t),f=Oe(n);(0,l.useEffect)((function(){var e=a.getState(),t=e.nodeInternals,n=e.edges,l=e.hasDefaultNodes,i=e.hasDefaultEdges,c=e.onNodesDelete,f=e.onEdgesDelete,g=Array.from(t.values()).reduce((function(e,t){return(!t.selected&&t.parentNode&&e.find((function(e){return e.id===t.parentNode}))||t.selected)&&e.push(t),e}),[]),p=n.filter((function(e){return e.selected}));if(u&&(g||p)){var v=(0,o.e)(g,n),m=[].concat((0,r._)(p),(0,r._)(v)),b=m.reduce((function(e,t){return e.includes(t.id)||e.push(t.id),e}),[]);if((i||l)&&(i&&a.setState({edges:n.filter((function(e){return!b.includes(e.id)}))}),l&&(g.forEach((function(e){t.delete(e.id)})),a.setState({nodeInternals:new Map(t)}))),b.length>0&&(null===f||void 0===f||f(m),s)){var h=b.map((function(e){return{id:e,type:"remove"}}));s(h)}if(g.length>0&&(null===c||void 0===c||c(g),d)){var y=g.map((function(e){return{id:e.id,type:"remove"}}));d(y)}a.setState({nodesSelectionActive:!1})}}),[u,d,s]),(0,l.useEffect)((function(){a.setState({multiSelectionActive:f})}),[f])}({deleteKeyCode:d,multiSelectionKeyCode:p});var Y=(0,l.useCallback)((function(e){null===n||void 0===n||n(e),z(),B.setState({nodesSelectionActive:!1})}),[n]),X=(0,l.useCallback)((function(e){return null===a||void 0===a?void 0:a(e)}),[a]),I=(0,l.useCallback)((function(e){return null===c||void 0===c?void 0:c(e)}),[c]);return l.createElement(Be,{onMove:s,onMoveStart:u,onMoveEnd:f,selectionKeyPressed:T,elementsSelectable:m,zoomOnScroll:b,zoomOnPinch:h,panOnScroll:y,panOnScrollSpeed:S,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:C,defaultPosition:P,defaultZoom:O,zoomActivationKeyCode:v,preventScrolling:_,noWheelClassName:D,noPanClassName:j},t,l.createElement(Xe,{selectionKeyPressed:T}),R&&l.createElement(He,{onSelectionDragStart:x,onSelectionDrag:M,onSelectionDragStop:N,onSelectionContextMenu:k,noPanClassName:j}),l.createElement("div",{className:"react-flow__pane react-flow__container",onClick:Y,onContextMenu:X,onWheel:I}))};Ue.displayName="FlowRenderer";var Ke=(0,l.memo)(Ue);var Ge=function(e){return{scale:e.transform[2],nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,nodeInternals:e.nodeInternals}},Ve=function(e){var t,n=(0,o.b)(Ge,i.Z),r=n.scale,a=n.nodesDraggable,c=n.nodesConnectable,d=n.elementsSelectable,s=n.updateNodeDimensions,u=n.snapGrid,f=n.snapToGrid,g=(t=e.onlyRenderVisibleElements,(0,o.b)((0,l.useCallback)((function(e){return t?(0,o.j)(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):Array.from(e.nodeInternals).map((function(e){var t=(0,o._)(e,2);return t[0],t[1]}))}),[t]))),p=(0,l.useRef)(),v=(0,l.useMemo)((function(){if("undefined"===typeof ResizeObserver)return null;var e=new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}}));s(t)}));return p.current=e,e}),[]);return(0,l.useEffect)((function(){return function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.disconnect()}}),[]),l.createElement("div",{className:"react-flow__nodes react-flow__container"},g.map((function(t){var n,i,s,g,p,m=t.type||"default";var b=e.nodeTypes[m]||e.nodeTypes.default,h=!!(t.draggable||a&&"undefined"===typeof t.draggable),y=!!(t.selectable||d&&"undefined"===typeof t.selectable),S=!!(t.connectable||c&&"undefined"===typeof t.connectable);return l.createElement(b,{key:t.id,id:t.id,className:t.className,style:t.style,type:m,data:t.data,sourcePosition:t.sourcePosition||o.P.Bottom,targetPosition:t.targetPosition||o.P.Top,hidden:t.hidden,xPos:null!==(n=null===(i=t.positionAbsolute)||void 0===i?void 0:i.x)&&void 0!==n?n:0,yPos:null!==(s=null===(g=t.positionAbsolute)||void 0===g?void 0:g.y)&&void 0!==s?s:0,dragging:!!t.dragging,snapGrid:u,snapToGrid:f,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:r,selected:!!t.selected,isDraggable:h,isSelectable:y,isConnectable:S,resizeObserver:v,dragHandle:t.dragHandle,zIndex:null!==(p=t.z)&&void 0!==p?p:0,isParent:!!t.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName})})))};Ve.displayName="NodeRenderer";var We=(0,l.memo)(Ve);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe,Je=function(e){return{nodeInternals:e.nodeInternals,transform:e.transform}},$e=function(e){var t,n,r,a,c,d,s,u,f=e.connectionNodeId,g=e.connectionHandleId,p=e.connectionHandleType,v=e.connectionLineStyle,m=e.connectionPositionX,b=e.connectionPositionY,h=e.connectionLineType,S=void 0===h?o.m.Bezier:h,w=e.isConnectable,E=e.CustomConnectionLineComponent,C=f,P=g,O=(0,o.b)(Je,i.Z),_=O.nodeInternals,x=O.transform,M=(0,l.useRef)(_.get(C));if(!M.current||!w||null===(t=M.current.handleBounds)||void 0===t||!t[p])return null;var N,k,j,B,L,z,R,T=null===(n=M.current.handleBounds)||void 0===n?void 0:n[p],Y=P?null===T||void 0===T?void 0:T.find((function(e){return e.id===P})):null===T||void 0===T?void 0:T[0],I=Y?Y.x+Y.width/2:(null!==(r=null===(a=M.current)||void 0===a?void 0:a.width)&&void 0!==r?r:0)/2,A=Y?Y.y+Y.height/2:null!==(c=null===(d=M.current)||void 0===d?void 0:d.height)&&void 0!==c?c:0,H=((null===(s=M.current.positionAbsolute)||void 0===s?void 0:s.x)||0)+I,Z=((null===(u=M.current.positionAbsolute)||void 0===u?void 0:u.y)||0)+A,U=(m-x[0])/x[2],K=(b-x[1])/x[2],G=null===Y||void 0===Y?void 0:Y.position;switch(G){case o.P.Left:N=o.P.Right;break;case o.P.Right:N=o.P.Left;break;case o.P.Top:N=o.P.Bottom;break;case o.P.Bottom:N=o.P.Top}switch(p){case"source":k=H,j=Z,B=G,L=U,z=K,R=N;break;case"target":k=U,j=K,B=N,L=H,z=Z,R=G}if(E)return l.createElement("g",{className:"react-flow__connection"},l.createElement(E,{sourceX:k,sourceY:j,sourcePosition:B,targetX:L,targetY:z,targetPosition:R,connectionLineType:S,connectionLineStyle:v,fromNode:M.current,fromHandle:Y,sourceNode:M.current,sourceHandle:Y}));var V="",W={sourceX:k,sourceY:j,sourcePosition:B,targetX:L,targetY:z,targetPosition:R};return V=S===o.m.Bezier?X(W):S===o.m.Step?D(Qe(Qe({},W),{},{borderRadius:0})):S===o.m.SmoothStep?D(W):S===o.m.SimpleBezier?y(W):"M".concat(k,",").concat(j," ").concat(L,",").concat(z),l.createElement("g",{className:"react-flow__connection"},l.createElement("path",{d:V,className:"react-flow__connection-path",style:v}))};function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}var tt=(qe={},(0,o.a)(qe,o.M.Arrow,(function(e){var t=e.color,n=void 0===t?"none":t,o=e.strokeWidth,r=void 0===o?1:o;return l.createElement("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,fill:"none",points:"-5,-4 0,0 -5,4"})})),(0,o.a)(qe,o.M.ArrowClosed,(function(e){var t=e.color,n=void 0===t?"none":t,o=e.strokeWidth,r=void 0===o?1:o;return l.createElement("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:r,fill:n,points:"-5,-4 0,0 -5,4 -5,-4"})})),qe);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var ot=function(e){var t=e.id,n=e.type,o=e.color,r=e.width,a=void 0===r?12.5:r,i=e.height,c=void 0===i?12.5:i,d=e.markerUnits,s=void 0===d?"strokeWidth":d,u=e.strokeWidth,f=e.orient,g=void 0===f?"auto":f,p=function(e){return(0,l.useMemo)((function(){return tt.hasOwnProperty(e)?tt[e]:function(){return null}}),[e])}(n);return l.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(a),markerHeight:"".concat(c),viewBox:"-10 -10 20 20",markerUnits:s,orient:g,refX:"0",refY:"0"},l.createElement(p,{color:o,strokeWidth:u}))},rt=function(e){return e.edges},at=function(e){var t=e.defaultColor,n=(0,o.b)(rt),r=(0,l.useMemo)((function(){var e=[];return n.reduce((function(n,r){return[r.markerStart,r.markerEnd].forEach((function(r){if(r&&"object"===et(r)){var a=(0,o.d)(r);e.includes(a)||(n.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:a,color:r.color||t},r)),e.push(a))}})),n.sort((function(e,t){return e.id.localeCompare(t.id)}))}),[])}),[n,t]);return l.createElement("defs",null,r.map((function(e){return l.createElement(ot,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})})))};at.displayName="MarkerDefinitions";var lt=[{level:0,isMaxLevel:!0,edges:[]}];function it(e,t,n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1,a=e.reduce((function(e,a){var l,i,c=(0,o.n)(a.zIndex),d=c?a.zIndex:0;return n&&(d=c?a.zIndex:Math.max((null===(l=t.get(a.source))||void 0===l?void 0:l.z)||0,(null===(i=t.get(a.target))||void 0===i?void 0:i.z)||0)),e[d]?e[d].push(a):e[d]=[a],r=d>r?d:r,e}),{}),l=Object.entries(a).map((function(e){var t=(0,o._)(e,2),n=+t[0];return{edges:t[1],level:n,isMaxLevel:n===r}}));return 0===l.length?lt:l}((0,o.b)((0,l.useCallback)((function(n){return e?n.edges.filter((function(e){var r=t.get(e.source),a=t.get(e.target);return(null===r||void 0===r?void 0:r.width)&&(null===r||void 0===r?void 0:r.height)&&(null===a||void 0===a?void 0:a.width)&&(null===a||void 0===a?void 0:a.height)&&function(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,a=e.sourceHeight,l=e.targetWidth,i=e.targetHeight,c=e.width,d=e.height,s=e.transform,u={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+l),y2:Math.max(t.y+a,n.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);var f=(0,o.r)({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:c/s[2],height:d/s[2]}),g=Math.max(0,Math.min(f.x2,u.x2)-Math.max(f.x,u.x)),p=Math.max(0,Math.min(f.y2,u.y2)-Math.max(f.y,u.y));return Math.ceil(g*p)>0}({sourcePos:r.position||{x:0,y:0},targetPos:a.position||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:a.width,targetHeight:a.height,width:n.width,height:n.height,transform:n.transform})})):n.edges}),[e,t])),t,n)}var ct=function(e){return{connectionNodeId:e.connectionNodeId,connectionHandleId:e.connectionHandleId,connectionHandleType:e.connectionHandleType,connectionPosition:e.connectionPosition,nodesConnectable:e.nodesConnectable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals}},dt=function(e){var t=(0,o.b)(ct,i.Z),n=t.connectionNodeId,r=t.connectionHandleId,c=t.connectionHandleType,d=t.connectionPosition,s=t.nodesConnectable,u=t.elementsSelectable,f=t.width,g=t.height,p=t.connectionMode,v=t.nodeInternals,m=it(e.onlyRenderVisibleElements,v,e.elevateEdgesOnSelect);if(!f)return null;var b=e.connectionLineType,h=e.defaultMarkerColor,y=e.connectionLineStyle,S=e.connectionLineComponent,w=n&&c;return l.createElement(l.Fragment,null,m.map((function(t){var i=t.level,m=t.edges,E=t.isMaxLevel;return l.createElement("svg",{key:i,style:{zIndex:i},width:f,height:g,className:"react-flow__edges react-flow__container"},E&&l.createElement(at,{defaultColor:h}),l.createElement("g",null,m.map((function(t){var n=Ce(v,t.source),r=(0,o._)(n,3),i=r[0],c=r[1],d=r[2],s=Ce(v,t.target),f=(0,o._)(s,3),g=f[0],m=f[1],b=f[2];if(!d||!b)return null;var h=t.type||"default",y=e.edgeTypes[h]||e.edgeTypes.default,S=p===o.C.Strict?m.target:m.target||m.source,w=Ee(c.source,t.sourceHandle||null),E=Ee(S,t.targetHandle||null),C=(null===w||void 0===w?void 0:w.position)||o.P.Bottom,P=(null===E||void 0===E?void 0:E.position)||o.P.Top;if(!w)return null;if(!E)return null;var O=function(e,t,n,o,r,a){var l=we(n,e,t),i=we(a,o,r);return{sourceX:l.x,sourceY:l.y,targetX:i.x,targetY:i.y}}(i,w,C,g,E,P),_=O.sourceX,x=O.sourceY,M=O.targetX,N=O.targetY;return l.createElement(y,{key:t.id,id:t.id,className:(0,a.Z)([t.className,e.noPanClassName]),type:h,data:t.data,selected:!!t.selected,animated:!!t.animated,hidden:!!t.hidden,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,style:t.style,source:t.source,target:t.target,sourceHandleId:t.sourceHandle,targetHandleId:t.targetHandle,markerEnd:t.markerEnd,markerStart:t.markerStart,sourceX:_,sourceY:x,targetX:M,targetY:N,sourcePosition:C,targetPosition:P,elementsSelectable:u,onEdgeUpdate:e.onEdgeUpdate,onContextMenu:e.onEdgeContextMenu,onMouseEnter:e.onEdgeMouseEnter,onMouseMove:e.onEdgeMouseMove,onMouseLeave:e.onEdgeMouseLeave,onClick:e.onEdgeClick,edgeUpdaterRadius:e.edgeUpdaterRadius,onEdgeDoubleClick:e.onEdgeDoubleClick,onEdgeUpdateStart:e.onEdgeUpdateStart,onEdgeUpdateEnd:e.onEdgeUpdateEnd})})),w&&E&&l.createElement($e,{connectionNodeId:n,connectionHandleId:r,connectionHandleType:c,connectionPositionX:d.x,connectionPositionY:d.y,connectionLineStyle:y,connectionLineType:b,isConnectable:s,CustomConnectionLineComponent:S})))})))};dt.displayName="EdgeRenderer";var st=(0,l.memo)(dt),ut=function(e){return e.transform};function ft(e){var t=e.children,n=(0,o.b)(ut);return l.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:"translate(".concat(n[0],"px,").concat(n[1],"px) scale(").concat(n[2],")")}},t)}var gt=function(e){var t=e.nodeTypes,n=e.edgeTypes,o=e.onMove,a=e.onMoveStart,i=e.onMoveEnd,c=e.onInit,d=e.onNodeClick,s=e.onEdgeClick,u=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,g=e.onNodeMouseEnter,p=e.onNodeMouseMove,v=e.onNodeMouseLeave,m=e.onNodeContextMenu,b=e.onNodeDragStart,h=e.onNodeDrag,y=e.onNodeDragStop,S=e.onSelectionDragStart,w=e.onSelectionDrag,E=e.onSelectionDragStop,C=e.onSelectionContextMenu,P=e.connectionLineType,O=e.connectionLineStyle,_=e.connectionLineComponent,x=e.selectionKeyCode,M=e.multiSelectionKeyCode,N=e.zoomActivationKeyCode,k=e.deleteKeyCode,D=e.onlyRenderVisibleElements,j=e.elementsSelectable,B=e.selectNodesOnDrag,L=e.defaultZoom,z=e.defaultPosition,R=e.preventScrolling,T=e.defaultMarkerColor,Y=e.zoomOnScroll,X=e.zoomOnPinch,I=e.panOnScroll,A=e.panOnScrollSpeed,H=e.panOnScrollMode,Z=e.zoomOnDoubleClick,U=e.panOnDrag,K=e.onPaneClick,G=e.onPaneScroll,V=e.onPaneContextMenu,W=e.onEdgeUpdate,F=e.onEdgeContextMenu,Q=e.onEdgeMouseEnter,q=e.onEdgeMouseMove,J=e.onEdgeMouseLeave,$=e.edgeUpdaterRadius,ee=e.onEdgeUpdateStart,te=e.onEdgeUpdateEnd,ne=e.noDragClassName,oe=e.noWheelClassName,re=e.noPanClassName,ae=e.elevateEdgesOnSelect;return function(e){var t=(0,r.u)(),n=(0,l.useRef)(!1);(0,l.useEffect)((function(){!n.current&&t.viewportInitialized&&e&&(setTimeout((function(){return e(t)}),1),n.current=!0)}),[e,t.viewportInitialized])}(c),l.createElement(Ke,{onPaneClick:K,onPaneContextMenu:V,onPaneScroll:G,deleteKeyCode:k,selectionKeyCode:x,multiSelectionKeyCode:M,zoomActivationKeyCode:N,elementsSelectable:j,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:Y,zoomOnPinch:X,zoomOnDoubleClick:Z,panOnScroll:I,panOnScrollSpeed:A,panOnScrollMode:H,panOnDrag:U,defaultPosition:z,defaultZoom:L,onSelectionDragStart:S,onSelectionDrag:w,onSelectionDragStop:E,onSelectionContextMenu:C,preventScrolling:R,noDragClassName:ne,noWheelClassName:oe,noPanClassName:re},l.createElement(ft,null,l.createElement(st,{edgeTypes:n,onEdgeClick:s,onEdgeDoubleClick:f,connectionLineType:P,connectionLineStyle:O,connectionLineComponent:_,onEdgeUpdate:W,onlyRenderVisibleElements:D,onEdgeContextMenu:F,onEdgeMouseEnter:Q,onEdgeMouseMove:q,onEdgeMouseLeave:J,onEdgeUpdateStart:ee,onEdgeUpdateEnd:te,edgeUpdaterRadius:$,defaultMarkerColor:T,noPanClassName:re,elevateEdgesOnSelect:!!ae}),l.createElement(We,{nodeTypes:t,onNodeClick:d,onNodeDoubleClick:u,onNodeMouseEnter:g,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:m,onNodeDragStop:y,onNodeDrag:h,onNodeDragStart:b,selectNodesOnDrag:B,onlyRenderVisibleElements:D,noPanClassName:re,noDragClassName:ne})))};gt.displayName="GraphView";var pt=(0,l.memo)(gt),vt=function(){return null};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function bt(e,t,n,r){var a=(0,l.useCallback)((function(a){if("undefined"!==typeof r&&!t){var l=n().nodeInternals.get(e);r(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l))}}),[r,t,e]);return a}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}vt.displayName="GroupNode";var St=function(e){return{addSelectedNodes:e.addSelectedNodes,updateNodePosition:e.updateNodePosition,unselectNodesAndEdges:e.unselectNodesAndEdges,updateNodeDimensions:e.updateNodeDimensions}},wt=function(e){var t=function(t){var n=t.id,r=t.type,c=t.data,d=t.scale,s=t.xPos,f=t.yPos,g=t.selected,p=t.onClick,v=t.onMouseEnter,m=t.onMouseMove,b=t.onMouseLeave,h=t.onContextMenu,y=t.onNodeDoubleClick,S=t.onNodeDragStart,w=t.onNodeDrag,E=t.onNodeDragStop,C=t.style,P=t.className,O=t.isDraggable,_=t.isSelectable,x=t.isConnectable,M=t.selectNodesOnDrag,N=t.sourcePosition,k=t.targetPosition,D=t.hidden,j=t.snapToGrid,B=t.snapGrid,L=t.dragging,z=t.resizeObserver,R=t.dragHandle,T=t.zIndex,Y=t.isParent,X=t.noPanClassName,I=t.noDragClassName,A=(0,o.u)(),Z=(0,o.b)(St,i.Z),U=Z.addSelectedNodes,K=Z.unselectNodesAndEdges,G=Z.updateNodePosition,V=Z.updateNodeDimensions,W=(0,l.useRef)(null),F=(0,l.useRef)(N),Q=(0,l.useRef)(k),q=(0,l.useRef)(r),J=_||O||p||v||m||b,$=(0,l.useMemo)((function(){return yt({zIndex:T,transform:"translate(".concat(s,"px,").concat(f,"px)"),pointerEvents:J?"all":"none"},C)}),[T,s,f,J,C]),ee=(0,l.useMemo)((function(){return j?B:[1,1]}),[j,null===B||void 0===B?void 0:B[0],null===B||void 0===B?void 0:B[1]]),te=bt(n,L,A.getState,v),ne=bt(n,L,A.getState,m),oe=bt(n,L,A.getState,b),re=bt(n,!1,A.getState,h),ae=bt(n,!1,A.getState,y),le=(0,l.useCallback)((function(e){if(!O&&(_&&(A.setState({nodesSelectionActive:!1}),g||U([n])),p)){var t=A.getState().nodeInternals.get(n);p(e,yt({},t))}}),[_,g,O,p,n]),ie=(0,l.useCallback)((function(e){if(M&&_)A.setState({nodesSelectionActive:!1}),g||U([n]);else if(!M&&!g&&_){A.getState().multiSelectionActive?U([n]):(K(),A.setState({nodesSelectionActive:!1}))}if(S){var t=A.getState().nodeInternals.get(n);S(e,yt({},t))}}),[n,g,M,_,S]),ce=(0,l.useCallback)((function(e,t){if(G({id:n,dragging:!0,diff:{x:t.deltaX,y:t.deltaY}}),w){var o,r,a=A.getState().nodeInternals.get(n);w(e,yt(yt({},a),{},{dragging:!0,position:{x:a.position.x+t.deltaX,y:a.position.y+t.deltaY},positionAbsolute:{x:((null===(o=a.positionAbsolute)||void 0===o?void 0:o.x)||0)+t.deltaX,y:((null===(r=a.positionAbsolute)||void 0===r?void 0:r.y)||0)+t.deltaY}}))}}),[n,w]),de=(0,l.useCallback)((function(e){var t;if((p||E)&&(t=A.getState().nodeInternals.get(n)),!L)return!_||M||g||U([n]),void(p&&t&&p(e,yt({},t)));G({id:n,dragging:!1}),E&&t&&E(e,yt(yt({},t),{},{dragging:!1}))}),[n,_,M,p,E,L,g]);if((0,l.useEffect)((function(){if(W.current&&!D){var e=W.current;return null===z||void 0===z||z.observe(e),function(){return null===z||void 0===z?void 0:z.unobserve(e)}}}),[D]),(0,l.useEffect)((function(){var e=q.current!==r,t=F.current!==N,o=Q.current!==k;W.current&&(e||t||o)&&(e&&(q.current=r),t&&(F.current=N),o&&(Q.current=k),V([{id:n,nodeElement:W.current,forceUpdate:!0}]))}),[n,r,N,k]),D)return null;var se=(0,a.Z)(["react-flow__node","react-flow__node-".concat(r),X,P,{selected:g,selectable:_,parent:Y}]);return l.createElement(u.DraggableCore,{onStart:ie,onDrag:ce,onStop:de,scale:d,disabled:!O,cancel:".".concat(I),nodeRef:W,grid:ee,enableUserSelectHack:!1,handle:R},l.createElement("div",{className:se,ref:W,style:$,onMouseEnter:te,onMouseMove:ne,onMouseLeave:oe,onContextMenu:re,onClick:le,onDoubleClick:ae,"data-id":n},l.createElement(H,{value:n},l.createElement(e,{id:n,data:c,type:r,xPos:s,yPos:f,selected:g,isConnectable:x,sourcePosition:N,targetPosition:k,dragging:L,dragHandle:R,zIndex:T}))))};return t.displayName="NodeWrapper",(0,l.memo)(t)};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e){var t={input:wt(e.input||ne),default:wt(e.default||ee),output:wt(e.output||re),group:wt(e.group||vt)},n=Object.keys(e).filter((function(e){return!["input","default","output","group"].includes(e)})).reduce((function(t,n){return t[n]=wt(e[n]||ee),t}),{});return Ct(Ct({},t),n)}function Ot(e,t){(0,l.useRef)(null);return(0,l.useMemo)((function(){return t(e)}),[e])}function _t(e){if(e&&"undefined"!==typeof document){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var xt=function(e){var t=e.children,n=!0;try{(0,o.u)()}catch(r){n=!1}return n?l.createElement(l.Fragment,null,t):l.createElement(o.o,{createStore:o.p},t)};xt.displayName="ReactFlowWrapper";var Mt=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){(0,o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_t(".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}"),_t(".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-default.selected:hover,.react-flow__node-group.selected,.react-flow__node-group.selected:hover,.react-flow__node-input.selected,.react-flow__node-input.selected:hover,.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__node-group.selected,.react-flow__node-group.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}");var Dt={input:ne,default:ee,output:re},jt={default:I,straight:R,step:z,smoothstep:j,simplebezier:S},Bt=[15,15],Lt=[0,0],zt=(0,l.forwardRef)((function(e,t){var n=e.nodes,i=e.edges,c=e.defaultNodes,d=e.defaultEdges,s=e.className,u=e.nodeTypes,g=void 0===u?Dt:u,p=e.edgeTypes,v=void 0===p?jt:p,m=e.onNodeClick,b=e.onEdgeClick,h=e.onInit,y=e.onMove,S=e.onMoveStart,w=e.onMoveEnd,E=e.onConnect,C=e.onConnectStart,P=e.onConnectStop,O=e.onConnectEnd,_=e.onNodeMouseEnter,x=e.onNodeMouseMove,M=e.onNodeMouseLeave,N=e.onNodeContextMenu,k=e.onNodeDoubleClick,D=e.onNodeDragStart,j=e.onNodeDrag,B=e.onNodeDragStop,L=e.onNodesDelete,z=e.onEdgesDelete,R=e.onSelectionChange,T=e.onSelectionDragStart,Y=e.onSelectionDrag,X=e.onSelectionDragStop,I=e.onSelectionContextMenu,A=e.connectionMode,H=void 0===A?o.C.Strict:A,Z=e.connectionLineType,U=void 0===Z?o.m.Bezier:Z,K=e.connectionLineStyle,G=e.connectionLineComponent,V=e.deleteKeyCode,W=void 0===V?"Backspace":V,F=e.selectionKeyCode,Q=void 0===F?"Shift":F,q=e.multiSelectionKeyCode,J=void 0===q?"Meta":q,$=e.zoomActivationKeyCode,ee=void 0===$?"Meta":$,te=e.snapToGrid,ne=void 0!==te&&te,oe=e.snapGrid,re=void 0===oe?Bt:oe,ae=e.onlyRenderVisibleElements,le=void 0!==ae&&ae,ie=e.selectNodesOnDrag,de=void 0===ie||ie,se=e.nodesDraggable,ue=e.nodesConnectable,ge=e.elementsSelectable,pe=e.minZoom,ve=e.maxZoom,me=e.defaultZoom,be=void 0===me?1:me,he=e.defaultPosition,ye=void 0===he?Lt:he,we=e.translateExtent,Ee=e.preventScrolling,Ce=void 0===Ee||Ee,Pe=e.nodeExtent,Oe=e.defaultMarkerColor,_e=void 0===Oe?"#b1b1b7":Oe,xe=e.zoomOnScroll,Me=void 0===xe||xe,Ne=e.zoomOnPinch,ke=void 0===Ne||Ne,De=e.panOnScroll,je=void 0!==De&&De,Be=e.panOnScrollSpeed,Le=void 0===Be?.5:Be,ze=e.panOnScrollMode,Re=void 0===ze?o.h.Free:ze,Te=e.zoomOnDoubleClick,Ye=void 0===Te||Te,Xe=e.panOnDrag,Ie=void 0===Xe||Xe,Ae=e.onPaneClick,He=e.onPaneScroll,Ze=e.onPaneContextMenu,Ue=e.children,Ke=e.onEdgeUpdate,Ge=e.onEdgeContextMenu,Ve=e.onEdgeDoubleClick,We=e.onEdgeMouseEnter,Fe=e.onEdgeMouseMove,Qe=e.onEdgeMouseLeave,qe=e.onEdgeUpdateStart,Je=e.onEdgeUpdateEnd,$e=e.edgeUpdaterRadius,et=void 0===$e?10:$e,tt=e.onNodesChange,nt=e.onEdgesChange,ot=e.noDragClassName,rt=void 0===ot?"nodrag":ot,at=e.noWheelClassName,lt=void 0===at?"nowheel":at,it=e.noPanClassName,ct=void 0===it?"nopan":it,dt=e.fitView,st=void 0!==dt&&dt,ut=e.fitViewOptions,ft=e.connectOnClick,gt=void 0===ft||ft,vt=e.attributionPosition,mt=e.proOptions,bt=e.defaultEdgeOptions,ht=e.elevateEdgesOnSelect,yt=void 0!==ht&&ht,St=(0,r.a)(e,Mt),wt=Ot(g,Pt),Et=Ot(v,Se),Ct=(0,a.Z)(["react-flow",s]);return l.createElement("div",kt(kt({},St),{},{ref:t,className:Ct}),l.createElement(xt,null,l.createElement(pt,{onInit:h,onMove:y,onMoveStart:S,onMoveEnd:w,onNodeClick:m,onEdgeClick:b,onNodeMouseEnter:_,onNodeMouseMove:x,onNodeMouseLeave:M,onNodeContextMenu:N,onNodeDoubleClick:k,onNodeDragStart:D,onNodeDrag:j,onNodeDragStop:B,nodeTypes:wt,edgeTypes:Et,connectionLineType:U,connectionLineStyle:K,connectionLineComponent:G,selectionKeyCode:Q,deleteKeyCode:W,multiSelectionKeyCode:J,zoomActivationKeyCode:ee,onlyRenderVisibleElements:le,selectNodesOnDrag:de,defaultZoom:be,defaultPosition:ye,preventScrolling:Ce,zoomOnScroll:Me,zoomOnPinch:ke,zoomOnDoubleClick:Ye,panOnScroll:je,panOnScrollSpeed:Le,panOnScrollMode:Re,panOnDrag:Ie,onPaneClick:Ae,onPaneScroll:He,onPaneContextMenu:Ze,onSelectionDragStart:T,onSelectionDrag:Y,onSelectionDragStop:X,onSelectionContextMenu:I,onEdgeUpdate:Ke,onEdgeContextMenu:Ge,onEdgeDoubleClick:Ve,onEdgeMouseEnter:We,onEdgeMouseMove:Fe,onEdgeMouseLeave:Qe,onEdgeUpdateStart:qe,onEdgeUpdateEnd:Je,edgeUpdaterRadius:et,defaultMarkerColor:_e,noDragClassName:rt,noWheelClassName:lt,noPanClassName:ct,elevateEdgesOnSelect:yt}),l.createElement(fe,{nodes:n,edges:i,defaultNodes:c,defaultEdges:d,onConnect:E,onConnectStart:C,onConnectStop:P,onConnectEnd:O,nodesDraggable:se,nodesConnectable:ue,elementsSelectable:ge,minZoom:pe,maxZoom:ve,nodeExtent:Pe,onNodesChange:tt,onEdgesChange:nt,snapToGrid:ne,snapGrid:re,connectionMode:H,translateExtent:we,connectOnClick:gt,defaultEdgeOptions:bt,fitView:st,fitViewOptions:ut,onNodesDelete:L,onEdgesDelete:z}),R&&l.createElement(ce,{onSelectionChange:R}),Ue,l.createElement(f,{proOptions:mt,position:vt})))}));zt.displayName="ReactFlow";function Rt(e){return function(t){var n=(0,l.useState)(t),r=(0,o._)(n,2),a=r[0],i=r[1],c=(0,l.useCallback)((function(t){return i((function(n){return e(t,n)}))}),[]);return[a,i,c]}}Rt(o.s),Rt(o.q)}}]);